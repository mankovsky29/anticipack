@page "/packing-activity"
@using Microsoft.AspNetCore.Components
@inject NavigationManager Navigation

<div class="loading">
    <div class="loading-spinner"></div>
    <span>Redirecting...</span>
</div>

@code {
    [Parameter]
    [SupplyParameterFromQuery(Name = "id")]
    public string? PackingId { get; set; }

    [Parameter]
    [SupplyParameterFromQuery(Name = "mode")]
    public string? Mode { get; set; } = "edit";

    protected override void OnInitialized()
    {
        if (string.IsNullOrEmpty(PackingId))
        {
            Navigation.NavigateTo("/packing-activities");
            return;
        }

        if (Mode?.ToLowerInvariant() == "packing")
        {
            Navigation.NavigateTo($"/play-packing/{PackingId}");
        }
        else
        {
            Navigation.NavigateTo($"/edit-packing/{PackingId}");
        }
    }
}